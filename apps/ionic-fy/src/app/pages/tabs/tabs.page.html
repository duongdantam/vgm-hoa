<ion-tabs
  (ionTabsWillChange)="onTabsWillChange($event)"
  [ngClass]="menuOpen ? 'menuOpen' : 'menuCollapse'"
>
  <fy-audio-player-widget
    [title]="(playerService.audioPlayState$ | async).playingTitle || ''"
    [isHidden]="playerService.audioIsHidden"
    [isVideoControl]="playerService.isOnVideoControl"
    [options]="{ autoplay: true, controls: false, sources: [{ src: audioPlayUrl, type: type }]}"
    [playbackRate]="playerService.playbackRate$ | async"
    [playingSource]="(playerService.audioPlayState$ | async).playingSource"
    [isPlaying]="(playerService.audioPlayState$ | async).isPlaying"
    [playingType]="(playerService.audioPlayState$ | async).playingType"
    [playingItem]="(playerService.audioPlayState$ | async).item"
    [playbackMode]="(playerService.playbackMode$ | async)"
    (onPlayerEvent)="handleAudioPlayerEvent($event)"
    [menuOpen]="menuOpen"
  ></fy-audio-player-widget>

  <fy-video-player-widget
    [isHidden]="playerService.videoIsHidden"
    [isVideoControl]="playerService.isOnVideoControl"
    [widgetLocation]="playerService.videoWidgetLocation"
    [isPlaying]="(playerService.videoPlayState$ | async).isPlaying"
    [audioIsPlaying]="(playerService.audioPlayState$ | async).isPlaying"
    [playingItem]="(playerService.videoPlayState$ | async).item"
    [playingSource]="(playerService.videoPlayState$ | async).playingSource"
    [options]="{autoplay: true, controls: true, sources: [{ src: videoPlayUrl, type: type}]}"
    (onPlayerEvent)="handleVideoPlayerEvent($event)"
    [menuOpen]="menuOpen"
  >
  </fy-video-player-widget>

  <ion-tab-bar
    mode="ios"
    slot="bottom"
    style="--background: var(--ion-color-primary-contrast)"
  >
    <ion-button fill="clear" (click)="menuOpen = !menuOpen;">
      <ion-icon name="menu-outline"></ion-icon>
    </ion-button>

    <ion-tab-button tab="home" (click)="menuTab('home')">
      <div
        class="icon-svg colorBase"
        style="-webkit-mask-image: url(assets/fy-icons/fy-home.svg)"
      ></div>
      <ion-label>{{'tabs.home' | translate}}</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="video" (click)="menuTab('video')">
      <div
        class="icon-svg colorBase"
        style="-webkit-mask-image: url(assets/fy-icons/fy-video.svg)"
      ></div>
      <ion-label>{{'tabs.video' | translate}}</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="audio" (click)="menuTab('audio')">
      <div
        class="icon-svg colorBase"
        style="-webkit-mask-image: url(assets/fy-icons/fy-audio.svg)"
      ></div>
      <ion-label>{{'tabs.audio' | translate}}</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="my" (click)="menuTab('home')">
      <div
        class="icon-svg colorBase"
        style="-webkit-mask-image: url(assets/fy-icons/fy-my.svg)"
      ></div>
      <ion-label>{{'tabs.my' | translate}}</ion-label>
    </ion-tab-button>

    <!-- <ion-tab-button tab="favorite" (click)="menuTab('favorite')">
      <div
        class="icon-svg colorBase"
        style="-webkit-mask-image: url(assets/icons/IconL/Light/star.svg)"
      ></div>
      <ion-label>{{'tabs.favorite' | translate}}</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="download" (click)="menuTab('download')">
      <div
        class="icon-svg colorBase"
        style="-webkit-mask-image: url(assets/icons/IconL/Light/download.svg)"
      ></div>
      <ion-label>{{'tabs.download' | translate}}</ion-label>
    </ion-tab-button> -->
  </ion-tab-bar>
</ion-tabs>
